飞书多维表格数据自动推送到地图系统集成方案

=== 系统架构说明 ===

1. 数据流程：
   飞书多维表格 → Webhook推送 → Node.js接收服务 → 更新CSV文件 → 地图系统自动显示

2. 技术实现：
   - 飞书多维表格：存储地点数据（包含经纬度）
   - Node.js服务：接收并处理飞书推送的数据
   - 自动更新：修改public/markers.csv文件
   - 地图刷新：前端定期检查数据更新

=== 飞书端配置要求 ===

需要在飞书多维表格中添加以下字段：
- shop_code: 店铺编码（文本类型）
- latitude: 纬度（数字类型，如：-6.1234567）
- longitude: 经度（数字类型，如：106.1234567）  
- outlet_name: 店铺名称（文本类型）
- brand: 品牌名称（文本类型，如：halocoko/Aice/Joyday等）
- kecamatan: 区域名称（文本类型，如：Cakung）

=== 数据推送方式 ===

方案1：飞书自动化推送（推荐）
- 使用飞书的自动化功能
- 当表格新增或修改记录时，自动发送HTTP请求到我们的服务

方案2：API轮询获取
- 定期调用飞书API获取最新数据
- 适合数据更新不频繁的场景

=== 安全性考虑 ===

1. API密钥验证：使用token验证请求合法性
2. 数据校验：验证经纬度格式和必填字段
3. 日志记录：详细记录所有数据操作
4. 错误处理：确保服务稳定运行

=== 部署说明 ===

1. 服务运行在3001端口
2. 支持HTTPS和HTTP
3. 自动备份原始CSV文件
4. 实时日志监控
5. 自动重启机制

=== 使用流程 ===

1. 启动数据接收服务
2. 在飞书中配置webhook地址
3. 在飞书表格中新增地点记录
4. 服务自动接收并处理数据
5. 地图系统自动显示新的标记点

这个方案可以实现飞书表格与地图系统的实时同步，提高工作效率。 