=== é£ä¹¦é”™è¯¯æ·±åº¦æ’æŸ¥æŒ‡å— ===

ğŸ” **å½“å‰çŠ¶å†µç¡®è®¤**ï¼š
âœ… GitHub Tokenæœ‰æ•ˆ (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)
âœ… GitHub APIè°ƒç”¨æˆåŠŸ (HTTP 204å“åº”)
âœ… Tokenæƒé™æ­£ç¡® (repo, workflow, admin:repo_hook)
âŒ é£ä¹¦è‡ªåŠ¨åŒ–ä»ç„¶æŠ¥é”™ï¼š"HTTPè¯·æ±‚å‡ºå‚è¿”å›æ ¼å¼ä¸æ­£ç¡®"

ğŸš¨ **é—®é¢˜åˆ†æ**ï¼š
ç”±äºGitHub APIç›´æ¥è°ƒç”¨æˆåŠŸï¼Œé—®é¢˜å¾ˆå¯èƒ½åœ¨é£ä¹¦è‡ªåŠ¨åŒ–çš„é…ç½®ç»†èŠ‚ä¸Šã€‚

=== ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥é£ä¹¦å“åº”å¤„ç†é…ç½® ===

**é—®é¢˜**ï¼šé£ä¹¦å¯èƒ½æœŸæœ›ç‰¹å®šçš„å“åº”æ ¼å¼ï¼Œä½†GitHub APIè¿”å›ç©ºå“åº”ï¼ˆ204 No Contentï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨é£ä¹¦è‡ªåŠ¨åŒ–çš„"å‘é€HTTPè¯·æ±‚"é…ç½®ä¸­
2. æ‰¾åˆ°"é«˜çº§è®¾ç½®"æˆ–"å“åº”å¤„ç†"é€‰é¡¹
3. è®¾ç½®ï¼š
   - æˆåŠŸçŠ¶æ€ç ï¼š`204` æˆ– `2xx`
   - å“åº”æ ¼å¼ï¼šé€‰æ‹©"ä¸è§£æå“åº”å†…å®¹"æˆ–"ä»»æ„æ ¼å¼"
   - æˆ–è€…å‹¾é€‰"å¿½ç•¥å“åº”å†…å®¹"

=== ç¬¬äºŒæ­¥ï¼šå°è¯•æœ€ç®€åŒ–é…ç½® ===

**è¯·æ±‚æ–¹æ³•**ï¼šPOST

**è¯·æ±‚URL**ï¼š
```
https://api.github.com/repos/AlimanIrawan/indonesia-map-feishu-integration/dispatches
```

**è¯·æ±‚å¤´ï¼ˆæœ€ç®€åŒ–ï¼‰**ï¼š
```
Authorization: token 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
```
âš ï¸ æ³¨æ„ï¼šå…ˆä¸è¦æ·»åŠ Content-Typeï¼Œæµ‹è¯•æ˜¯å¦æˆåŠŸ

**è¯·æ±‚ä½“ï¼ˆæœ€ç®€åŒ–æµ‹è¯•ï¼‰**ï¼š
```json
{"event_type": "test"}
```

=== ç¬¬ä¸‰æ­¥ï¼šé€æ­¥æ·»åŠ é…ç½® ===

**å¦‚æœç¬¬äºŒæ­¥æˆåŠŸï¼Œå†æ·»åŠ Content-Type**ï¼š
```
Authorization: token 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
Content-Type: application/json
```

**ç„¶åä½¿ç”¨å®Œæ•´è¯·æ±‚ä½“**ï¼š
```json
{
  "event_type": "feishu-data-update", 
  "client_payload": {
    "shop_code": "{{ç¬¬1æ­¥æ»¡è¶³æ¡ä»¶... At Outlet Code}}",
    "latitude": "{{ç¬¬1æ­¥æ»¡è¶³æ¡ä»¶... 5, latitude}}",
    "longitude": "{{ç¬¬1æ­¥æ»¡è¶³æ¡ä»¶... 5, longitude}}",
    "outlet_name": "{{ç¬¬1æ­¥æ»¡è¶³æ¡ä»¶... At Nama Pemilik}}"
  }
}
```

=== ç¬¬å››æ­¥ï¼šæ£€æŸ¥å­—æ®µæ˜ å°„ ===

**å¸¸è§é—®é¢˜**ï¼š
1. å­—æ®µåä¸åŒ¹é…
2. å­—æ®µå€¼ä¸ºç©º
3. å­—æ®µæ ¼å¼é”™è¯¯

**è°ƒè¯•æ–¹æ³•**ï¼š
1. å…ˆç”¨å›ºå®šå€¼æµ‹è¯•ï¼š
```json
{
  "event_type": "feishu-data-update", 
  "client_payload": {
    "shop_code": "TEST001",
    "latitude": "-6.2",
    "longitude": "106.8",
    "outlet_name": "æµ‹è¯•åº—é“º"
  }
}
```

2. å¦‚æœå›ºå®šå€¼æˆåŠŸï¼Œå†é€ä¸ªæ›¿æ¢ä¸ºåŠ¨æ€å­—æ®µ

=== ç¬¬äº”æ­¥ï¼šæ£€æŸ¥é£ä¹¦è‡ªåŠ¨åŒ–ç‰ˆæœ¬ ===

**å¯èƒ½çš„é—®é¢˜**ï¼š
- æ—§ç‰ˆæœ¬é£ä¹¦è‡ªåŠ¨åŒ–å¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜
- HTTPè¯·æ±‚åŠŸèƒ½å¯èƒ½æœ‰é™åˆ¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥é£ä¹¦æ˜¯å¦æœ‰æ›´æ–°
2. å°è¯•é‡æ–°åˆ›å»ºè‡ªåŠ¨åŒ–æµç¨‹
3. æˆ–è€…ä½¿ç”¨é£ä¹¦çš„"è‡ªå®šä¹‰è„šæœ¬"åŠŸèƒ½

=== ç¬¬å…­æ­¥ï¼šä½¿ç”¨é£ä¹¦è‡ªå®šä¹‰è„šæœ¬æ›¿ä»£æ–¹æ¡ˆ ===

å¦‚æœHTTPè¯·æ±‚ä¸€ç›´æœ‰é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰è„šæœ¬ï¼š

```javascript
async function main(event) {
    try {
        const record = event.record;
        
        const response = await fetch('https://api.github.com/repos/AlimanIrawan/indonesia-map-feishu-integration/dispatches', {
            method: 'POST',
            headers: {
                'Authorization': 'token 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',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                event_type: 'feishu-data-update',
                client_payload: {
                    shop_code: record.fields['Outlet Code'] || '',
                    latitude: record.fields['latitude'] || '',
                    longitude: record.fields['longitude'] || '',
                    outlet_name: record.fields['Nama Pemilik'] || ''
                }
            })
        });
        
        if (response.status === 204) {
            console.log('âœ… GitHub Actionsè§¦å‘æˆåŠŸ');
        } else {
            console.error('âŒ è¯·æ±‚å¤±è´¥:', response.status);
        }
        
    } catch (error) {
        console.error('âŒ è„šæœ¬é”™è¯¯:', error);
    }
}
```

=== ç¬¬ä¸ƒæ­¥ï¼šæ£€æŸ¥å…·ä½“é”™è¯¯ä¿¡æ¯ ===

**è·å–è¯¦ç»†é”™è¯¯**ï¼š
1. åœ¨é£ä¹¦è‡ªåŠ¨åŒ–æ‰§è¡Œè®°å½•ä¸­ç‚¹å‡»"è¯¦æƒ…"
2. æŸ¥çœ‹å®Œæ•´çš„é”™è¯¯å“åº”
3. æˆªå›¾é”™è¯¯è¯¦æƒ…ï¼Œè¿›ä¸€æ­¥åˆ†æ

**å¸¸è§é”™è¯¯ç±»å‹**ï¼š
1. `401 Unauthorized` - Tokené—®é¢˜
2. `400 Bad Request` - è¯·æ±‚æ ¼å¼é—®é¢˜
3. `404 Not Found` - URLé”™è¯¯
4. `422 Unprocessable Entity` - æ•°æ®éªŒè¯å¤±è´¥

=== ç«‹å³è¡ŒåŠ¨å»ºè®® ===

**ä¼˜å…ˆçº§1**ï¼šæ£€æŸ¥é£ä¹¦çš„å“åº”å¤„ç†è®¾ç½®
**ä¼˜å…ˆçº§2**ï¼šä½¿ç”¨æœ€ç®€åŒ–é…ç½®æµ‹è¯•
**ä¼˜å…ˆçº§3**ï¼šæŸ¥çœ‹é£ä¹¦çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
**ä¼˜å…ˆçº§4**ï¼šè€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰è„šæœ¬æ›¿ä»£

ä½ å¯ä»¥å…ˆå°è¯•ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½è§£å†³é—®é¢˜ã€‚å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œè¯·æŠŠé£ä¹¦çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯æˆªå›¾ç»™æˆ‘çœ‹ã€‚ 